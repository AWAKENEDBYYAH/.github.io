<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Subscribe | Awakened By YAH</title>
  <link rel="canonical" href="https://awakenedbyyahmusic.com/subscribe.html" />
  <link rel="icon" type="image/png" href="/abytransparent.png">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/favicon.png">

  <style>
    :root{
      --bg:#020617;
      --text:#e5e7eb;
      --muted:#94a3b8;
      --line:rgba(255,255,255,.10);
      --brand:#1C39A8;
      --brand2:#2b56ff;
      --radius:22px;
      --glow:rgba(28,57,168,.45);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 10% 10%, rgba(28,57,168,.35), transparent 55%),
        radial-gradient(1000px 700px at 90% 15%, rgba(43,86,255,.18), transparent 60%),
        radial-gradient(900px 600px at 50% 95%, rgba(255,255,255,.06), transparent 55%),
        var(--bg);
      min-height:100vh;
    }
    header{
      padding:18px 18px 0;
      display:flex;
      align-items:center;
      justify-content:space-between;
      max-width:1000px;
      margin:0 auto;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      text-decoration:none;
      color:var(--text);
    }
    .brand img{width:38px;height:38px;object-fit:contain}
    .brand span{font-weight:800;letter-spacing:.3px}
    .nav a{
      color:var(--muted);
      text-decoration:none;
      font-weight:600;
      margin-left:14px;
    }
    .nav a:hover{color:var(--text)}
    main{
      max-width:1000px;
      margin:0 auto;
      padding:22px 18px 38px;
    }
    .card{
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
      border-radius:var(--radius);
      box-shadow:0 0 0 1px rgba(255,255,255,.03), 0 24px 80px rgba(0,0,0,.35);
      overflow:hidden;
    }
    .hero{
      padding:24px;
      border-bottom:1px solid var(--line);
      background:linear-gradient(135deg, rgba(28,57,168,.18), rgba(255,255,255,.02));
    }
    h1{margin:0 0 8px;font-size:28px;letter-spacing:.2px}
    p{margin:0;color:var(--muted);line-height:1.6}
    .content{
      padding:22px 24px 26px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:18px;
    }
    @media (max-width:860px){
      .content{grid-template-columns:1fr}
    }
    .panel{
      border:1px solid var(--line);
      border-radius:18px;
      background:rgba(255,255,255,.03);
      padding:18px;
    }
    .panel h2{
      margin:0 0 10px;
      font-size:16px;
      letter-spacing:.3px;
      text-transform:uppercase;
      color:var(--text);
    }
    .bullets{margin:0;padding-left:18px;color:var(--muted);line-height:1.7}
    .btn{
      appearance:none;
      border:0;
      width:100%;
      cursor:pointer;
      border-radius:16px;
      padding:14px 16px;
      font-weight:900;
      letter-spacing:.3px;
      color:white;
      background:linear-gradient(135deg, var(--brand), var(--brand2));
      box-shadow:0 14px 40px var(--glow);
      transition:transform .08s ease, filter .15s ease;
      margin-top:10px;
    }
    .btn:hover{filter:brightness(1.05)}
    .btn:active{transform:translateY(1px)}
    .note{
      font-size:13px;
      color:var(--muted);
      margin-top:10px;
      line-height:1.5;
    }
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .input{
      width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(2,6,23,.4);
      color:var(--text);
      outline:none;
    }
    .status{
      margin-top:10px;
      font-size:13px;
      color:var(--muted);
      min-height:18px;
    }
    .ok{color:#a7f3d0}
    .bad{color:#fecaca}
    footer{
      max-width:1000px;
      margin:16px auto 24px;
      padding:0 18px;
      color:var(--muted);
      font-size:12px;
    }
    code{color:#c7d2fe}
  </style>
</head>

<body>
  <header>
    <a class="brand" href="/index.html">
      <img src="/abytransparent.png" alt="Awakened By YAH logo" />
      <span>AWAKENED BY YAH</span>
    </a>
    <div class="nav">
      <a href="/music.html">Music</a>
      <a href="/stream.html">Stream</a>
      <a href="/index.html">Home</a>
    </div>
  </header>

  <main>
    <div class="card">
      <div class="hero">
        <h1>Subscribe & Support</h1>
        <p>Click below to open secure Stripe Checkout.</p>
      </div>

      <div class="content">
        <div class="panel">
          <h2>What you’ll get</h2>
          <ul class="bullets">
            <li>Support the music & mission</li>
            <li>Access to supporter-only updates (if you enable gating later)</li>
            <li>Secure payment through Stripe Checkout</li>
          </ul>

          <div class="row">
            <input id="email" class="input" type="email" placeholder="Email (optional but recommended)" autocomplete="email" />
          </div>

          <button id="checkoutBtn" class="btn">Continue to Checkout</button>

          <div id="status" class="status"></div>

          <div class="note">
            If you see a message like <code>Method Not Allowed</code> when visiting your function URL directly, that’s normal —
            Checkout must be started by clicking the button.
          </div>
        </div>

        <div class="panel">
          <h2>Setup (already done)</h2>
          <ul class="bullets">
            <li>Your backend creates a Checkout Session</li>
            <li>Your browser redirects to Stripe</li>
            <li>Your webhook confirms payments</li>
          </ul>
          <div class="note">
            This page is just the “front door” so you finally have a real link to share:
            <br><br>
            <code>awakenedbyyahmusic.com/subscribe.html</code>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer>
    © Awakened By YAH — Secure payments powered by Stripe.
  </footer>

  <script>
    // ✅ REPLACE THESE TWO VALUES:


const PROJECT_REF = "fgzopgqtotwmvfohtlcq";
const PRICE_ID   = "price_1SgJlh19lhS22qNvxCQJgIYt";

const ENDPOINT = "https://fgzopgqtotwmvfohtlcq.supabase.co/functions/v1/create-checkout";






    const statusEl = document.getElementById("status");
    const btn = document.getElementById("checkoutBtn");
    const emailInput = document.getElementById("email");

    function setStatus(msg, type){
      statusEl.textContent = msg || "";
      statusEl.className = "status " + (type || "");
    }

    btn.addEventListener("click", async () => {
      setStatus("Starting Checkout…", "");
      btn.disabled = true;

      try {
        const email = (emailInput.value || "").trim();

        const res = await fetch(ENDPOINT, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            priceId: PRICE_ID,
            customerEmail: email || undefined,
            successUrl: "https://awakenedbyyahmusic.com/success.html",
            cancelUrl: "https://awakenedbyyahmusic.com/subscribe.html"
          })
        });

        const data = await res.json().catch(() => ({}));

        if (!res.ok) {
          throw new Error(data.error || `Request failed (${res.status})`);
        }
        if (!data.url) {
          throw new Error("No Checkout URL returned from server.");
        }

        setStatus("Redirecting to Stripe Checkout…", "ok");
        window.location.href = data.url;

      } catch (e) {
        setStatus(String(e.message || e), "bad");
        btn.disabled = false;
      }
    });
  </script>
</body>
</html>

